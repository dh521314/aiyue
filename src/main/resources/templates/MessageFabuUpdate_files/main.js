/**------------- 17K小说网 阅读改变人生 ----------------
 -
 -      _~~````````````~_    _~````````````~~_
 -    -/                 \  /                 \-
 -   //                   ||                   \\
 -  //__~====````====~__  || __~====````====~___\\
 - /_==~~~***````***~~--__||__--~~***````***~~~==_\
 -
 * @author ZhangYongfeng
 * @date 2018-8-21
 * @license ChineseAll.com
 * @fileOverview 全局类库和业务, 支持ie8+
 * @class QD
 * @alias k
 */
!function(config){"use strict";var script=document.getElementsByTagName("script"),_={t:{i:location.hostname.match(/\w+\.\w+$/)[0],o:"ARTWC_COM",u:"array",s:"string",h:"null",p:"undefined",l:"boolean",_:"comment",g:"date",k:"document",m:"function",T:"get",A:"html",j:"json",U:"number",O:"nodelist",S:"object",C:"post",M:(src=script[script.length-1].src,ver=src.match(/v=(\d+)/),ver?ver[0]:""),J:function(n){return n.replace(/\/[^\/]+$/,"")}(script[script.length-1].src),D:"text",P:"window",N:"xml",I:"body"},R:new Function,F:function(n,t){return(t=this.$("script")).src=n,t},q:document.getElementsByTagName("head")[0],L:encodeURIComponent,X:decodeURIComponent,P:window,B:!window.addEventListener,G:Object.defineProperty,$:function(n){return document.createElement(n)}},src,ver;function isUn(n){return void 0===n}function isNull(n){return null===n}function empty(n){switch(getType(n)){case _.t.u:if(0===n.length)return!0;break;case _.t.S:var t=null;for(t in n);return isNull(t)}return!n}function isObj(n){return getType(n)===_.t.S}function forObj(n,t,r){if(isObj(n))for(var e in n)if(n.hasOwnProperty(e)&&t.call(r,n[e],e))break}function forArr(n,t,r){for(var e=0;e<n.length&&!t.call(r,n[e],e);e++);}function mapObj(n,t){var r,e={};for(var i in n)n.hasOwnProperty(i)&&(isUn(r=t(n[i],i))||(e[i]=r));return e}function mapArr(n,t){for(var r,e=[],i=0;i<n.length;i++)isUn(r=t(n[i],i))||e.push(r);return e}function loadCss(n,t){var r=_.$("link");r.rel="stylesheet",r.href=n,r.onload=function(){t&&t()},_.q.appendChild(r)}function loadJs(n,t){var r=_.F(n);getType(t)!==_.t.A?(getType(t)===_.t.s?(r.id=t,r.className=t):r.onload=function(){t&&t()},_.q.appendChild(r)):t.appendChild(r)}function objMerge(n,t,r){if(isObj(t))for(var e in n)if(n.hasOwnProperty(e)&&t.hasOwnProperty(e)){if(r&&getType(n[e])!==getType(t[e]))continue;n[e]=t[e]}return n}function objComb(n,t,r){if(isObj(n)){if(isObj(t))for(var e in t)t.hasOwnProperty(e)&&(r&&isObj(n[e])&&isObj(t[e])?objComb(n[e],t[e],r):n[e]=t[e]);return n}return isObj(t)?t:{}}function parseUrl(n,t){0===(n=n||location.href).indexOf("//")?n=location.protocol+n:0===n.indexOf("/")?n="//"+location.host+n:n.match(/[a-z]+:\/\//i)||(n="//"+location.host+location.pathname+"/"+n);var r,e={protocol:(r=n.match(/^[a-z]+:(?=\/\/)/i),r?r[0]:location.protocol),hostname:function(){var t=n.match(/\/\/([^/:]+)/);return t?t[1]:location.hostname}(),port:function(){var t=n.match(/:(\d+)(\/|$)/);return t?t[1]:n.indexOf("//")>=0?"":location.port}(),hash:function(){var t=n.match(/#.+/);return t?t[0]:location.hash}(),pathname:n.replace(/^\w+:/,"").replace(/\/\/[^\/]+/,"").replace(/\?.*/,"").replace(/#.*/,"")||"/",searchObj:function(){var r=n.match(/\?([^#]*)/),e=t||{};return r&&forArr(r=r[1].split(/&+/),(function(n){2===(n=n.replace("=",_.t.o).split(_.t.o)).length&&(isUn(e[n[0]])?e[n[0]]=n[1]:getType(e[n[0]])===_.t.u?e[n[0]].push(n[1]):e[n[0]]=[e[n[0]],n[1]])})),e}(),searchParams:{getAll:function(n){return getType(e.searchObj[n])===_.t.u?e.searchObj[n]:[e.searchObj[n]]},get:function(n){return getType(e.searchObj[n])===_.t.u?e.searchObj[n][0]:e.searchObj[n]},has:function(n){return!isUn(e.searchObj[n])},set:function(n,t){return e.searchObj[n]=t,e.href},append:function(n,t){return e.searchObj[n]?(getType(e.searchObj[n])!==_.t.u&&(e.searchObj[n]=[e.searchObj[n]]),getType(t)!==_.t.u&&(t=[String(t)]),e.searchObj[n]=e.searchObj[n].concat(t)):e.searchObj[n]=t,e.href},delete:function(n){return delete e.searchObj[n],e.href},concat:function(n){return forObj(n,(function(n,t){this.append(t,n)}),this),e.href},toString:function(){var n=[];return forObj(e.searchObj,(function(t,r){getType(t)===_.t.u?forArr(t,(function(t){n.push(r+"="+String(t))})):n.push(r+"="+String(t))})),n.join("&").replace(/ /g,"%20")}}};if(_.B){var i=_.$("span");forObj(e,(function(n,t){_.G(i,t,{value:n})})),e=i}return _.G(e,"href",{get:function(){return e.protocol+"//"+e.host+e.pathname+e.search+e.hash}}),_.G(e,"search",{get:function(){var n=e.searchParams.toString();return n?"?"+n:""}}),_.G(e,"host",{get:function(){return e.hostname+(e.port?":"+e.port:"")}}),e}function getType(n){if(typeof n!==_.t.S)return typeof n===_.t.U&&isNaN(n)?"nan":typeof n;if(null===n)return"null";if(typeof n.nodeType!==_.t.U)return n.window?_.t.P:n.item&&n.length?_.t.O:Object.prototype.toString.call(n).slice(8,-1).toLowerCase();switch(n.nodeType){case 9:return _.t.k;case 3:return _.t.D;case 8:return _.t._;default:return _.t.A}}function xhr(n){if(!1===navigator.onLine)return k.pop("网络连接已断开"),void setTimeout((function(){xhr(n)}),3e3);(n=objMerge({header:{},data:{},url:"./",method:_.t.T,async:!0,success:_.R,failed:_.R,error:_.R,type:""},n,!0)).url=parseUrl(n.url);var t=function(t){return n.type.toLowerCase()===_.t.j&&(t=parseJson(t)),t},r=new XMLHttpRequest;if(n.url.host!==location.host&&window.XDomainRequest&&!window.Blob){if((r=new XDomainRequest).onload=function(){n.success(t(this.responseText))},!1===n.async){var e=new XMLHttpRequest;e.onreadystatechange=function(){r.responseText&&e.abort()},e.open("GET","/"+Math.random(),!1),e.send("")}}else r.onreadystatechange=function(){4===this.readyState&&(200===this.status?n.success(t(this.responseText)):n.failed(this.status))};var i=n.method.toLowerCase();for(var o in"get"===i&&n.url.searchParams.concat(n.data),r.onerror=function(t){n.error(t)||k.pop("网络请求失败"),r.abort()},r.open(n.method,n.url.href,n.async),n.header)n.header.hasOwnProperty(o)&&r.setRequestHeader(o,n.header[o]);var u=[];if("post,put,delete".indexOf(i)>=0)for(var c in r.setRequestHeader("CONTENT-TYPE","application/x-www-form-urlencoded; charset=utf-8"),n.data)n.data.hasOwnProperty(c)&&(getType(n.data[c])===_.t.u?u.push(mapArr(n.data[c],(function(n){return c+"="+_.L(String(n))})).join("&")):u.push(c+"="+_.L(String(n.data[c]))));try{r.send(u.join("&"))}catch(t){n.error(t)||k.pop("网络出现异常"),r.abort()}return r}function parseJson(n){try{return new Function("return "+n)()}catch(t){return new Function('return {status:{code: 405, msg:"'+n.replace(/\n/g,"")+'"}}')()}}function stringJson(n){var t=[];switch(getType(n)){case _.t.S:for(var r in n)n.hasOwnProperty(r)&&t.push('"'+r+'":'+stringJson(n[r]));return"{"+t.join(",")+"}";case _.t.u:case _.t.O:for(var e=0;e<n.length;e++)t.push(stringJson(n[e]));return"["+t.join(",")+"]";case _.t.U:case _.t.l:return n;case _.t.m:return stringJson(n());case _.t.g:return n.getTime();case _.t.A:return stringJson.j.H(n.outerHTML);case _.t.D:return stringJson.j.H(n.textContent);case _.t.p:case _.t.h:return String(n);default:return stringJson.j.H(n)}}function storage(n,t,r){var e=r?sessionStorage:localStorage,i=parseJson(e.getItem("Q_storage_object")||"{}");return isUn(t)?!(t=i[n])&&isUn(r)&&(t=parseJson(localStorage.getItem("Q_storage_object")||"{}")[n]):isNull(t)?(t=i[n],delete i[n],e.setItem("Q_storage_object",stringJson(i))):(i[n]=t,e.setItem("Q_storage_object",stringJson(i))),t}_.B&&(String.prototype.trim=function(){return this.replace(/(^\s+)|(\s+$)/g,"")},Array.prototype.forEach=function(n,t){for(var r=0;r<this.length;r++)n.apply(t||this,[this[r],r,this])},Array.prototype.filter=function(n,t){for(var r=[],e=0;e<this.length;e++)!0===n.apply(t||this,[this[e],e,this])&&r.push(this[e]);return r},Array.prototype.map=function(n,t){for(var r=[],e=0;e<this.length;e++)r.push(n.apply(t||this,[this[e],e,this]));return r},Array.prototype.indexOf=function(n){for(var t=0;t<this.length;t++)if(this[t]===n)return t;return-1}),window.Promise||(window.Promise=function(n){var t,r;n((function(n){t=n,i()}),(function(n){r=n,i()}));var e=[],i=function(){var n,i;for(void 0!==t?(n="resolve",i=t):void 0!==r&&(n="reject",i=r);n&&i&&e[0];)e.shift()[n](i)};this.then=function(n,t){return e.push({resolve:n||new Function,reject:t||new Function}),i(),this}}),stringJson.j={K:{"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},V:function(n){return stringJson.j.K[n]||n},H:function(n){return'"'+String(n).replace(/[\x00-\x1f\\"]/g,stringJson.j.V)+'"'}},_.W=function(n,t){if(getType(n)===_.t.s)if(n.match(/^<[a-z\-]+\d?>$/i))this.node=[_.$(n.substr(1,n.length-2))];else{var r=(t=t||document).querySelectorAll(n);_.B?(this.node=[],forArr(r,(function(n){this.node.push(n)}),this)):this.node=[].slice.call(r)}else getType(n)===_.t.A?this.node=[n]:getType(n)===_.t.O?this.node=[].slice.call(n):(this.data=n,this.node=[n])},_.W.prototype={forEach:function(n,t){return getType(this.data)===_.t.S?forObj(this.data,n,t):getType(this.data)===_.t.u?forArr(this.data,n,t):forArr(this.node,n,t||this),this},map:function(n){return getType(this.data)===_.t.S?mapObj(this.data,n):getType(this.data)===_.t.u?mapArr(this.data,n):mapArr(this.node,n)},className:function(n,t){return forArr(this.node,(function(r){t?r.className+=" "+n:r.className=n})),this},rmClass:function(n){return forArr(this.node,(function(t){t.className=t.className.replace(n,"")})),this},style:function(n){var t=_.B?"setAttribute":"setProperty";return forArr(this.node,(function(r){forObj(n,(function(n,e){r.style[t](e,n,"")}))})),this},rmStyle:function(n){var t=_.B?"removeAttribute":"removeProperty";switch(getType(n)){case _.t.u:forArr(this.node,(function(r){forArr(n,(function(n){r.style[t](n)}))}));break;case _.t.s:forArr(this.node,(function(r){r.style[t](n)}));break;default:forArr(this.node,(function(n){n.style.cssText=""}))}return this},add:function(n){return forArr(this.node,(function(t){forObj(n,(function(n,r){t.setAttribute(r,n)}))})),this},del:function(n){return n=getType(n)===_.t.u?n:[n],forArr(this.node,(function(t){forArr(n,(function(n){t.removeAttribute(n)}))})),this},get:function(n){switch(this.node.length){case 0:return"";case 1:return this.node[0].getAttribute(n)||this.node[0][n];default:return mapArr(this.node,(function(t){return t.getAttribute(n)||t[n]}))}},html:function(n,t){return isUn(n)?(n="",forArr(this.node,(function(t){n+=t.innerHTML})),n):(forArr(this.node,(function(r){var e=String(getType(n)===_.t.m?n(r):n);t?r.innerHTML+=" "+e:r.innerHTML=e})),this)},append:function(n,t){function r(n,t,r){r&&n.contains(r)?n.insertBefore(t,r):n.appendChild(t)}return t&&t.node&&(t=t.item()),getType(n)===_.t.O||getType(n)===_.t.u?forArr(this.node,(function(e){forArr(n,(function(n){r(e,n,t)}))})):n&&getType(n.node)===_.t.u?forArr(this.node,(function(e){forArr(n.node,(function(n){r(e,n,t)}))})):getType(n)===_.t.A?forArr(this.node,(function(e){r(e,n,t)})):k("<div>").html(n).childs().forEach((function(n){forArr(this.node,(function(e){r(e,n,t)}))}),this),this},appendTo:function(n,t){return getType(t)===_.t.A?forArr(this.node,(function(r){n.insertBefore(r,t)})):forArr(this.node,(function(t){n.appendChild(t)})),this},item:function(n){return(n=n||0)<0&&(n=this.node.length+n),this.node[n]},event:function(n,t,r){if(_.B){var e=function(n){(n=window.event).target=n.srcElement,n.stopPropagation=function(){n.cancelBubble=!0},n.preventDefault=function(){n.returnValue=!1},t.call(n.srcElement,n)};"input"===n&&(n="propertychange",e=function(n){"value"===n.propertyName.toLowerCase()&&t.call(n.srcElement,n)}),forArr(this.node,(function(t){t.attachEvent("on"+n,e)}))}else forArr(this.node,(function(e){e.addEventListener(n,t,r||!1)}));return this},oneEvent:function(n,t){var r;return _.B?(r=function(e){(e=window.event).target=e.srcElement,e.stopPropagation=function(){e.cancelBubble=!0},e.preventDefault=function(){e.returnValue=!1},t.call(e.target,e),e.target.detachEvent("on"+n,r)},"input"===n&&(n="propertychange",r=function(e){"value"===e.propertyName.toLowerCase()&&(t.call(e.srcElement,e),e.srcElement.detachEvent("on"+n,r))}),forArr(this.node,(function(t){t.attachEvent("on"+n,r)}))):(r=function(e){t.call(this,e),this.removeEventListener(n,r)},forArr(this.node,(function(t){t.addEventListener(n,r)}))),this},stopEvent:function(n,t){return this.event(n,(function(n){n.stopPropagation(),t&&t.call(this,n)}))},onlyEvent:function(n,t){return this.event(n,(function(n){n.stopPropagation(),n.preventDefault(),t&&t.call(this,n,{passive:!1})}))},remove:function(){return forArr(this.node,(function(n){n.parentNode&&n.parentNode.removeChild(n)})),this},childs:function(n){var t=[],r=null;return getType(n)===_.t.s&&(r=n.toUpperCase()),forArr(this.node,(function(n){forArr(n.childNodes,(function(n){getType(n)===_.t.A&&(r?n.tagName===r&&t.push(n):t.push(n))}))})),null===n?t:(getType(n)===_.t.U?this.node=[t[n]]:this.node=t,this)},childNodes:function(){return this.childs(null)},parent:function(n){var t=[];return forArr(this.node,(function(r){n?t.push(function n(t,r){var e=t.parentNode;return e?e.tagName.toLowerCase()===r.toLowerCase()?e:n(e,r):document}(r,n)):t.push(r.parentNode)})),this.node=t,this},render:function(n,t,r){return this.randeDate=n,this.randeCallback=t||this.randeCallback||_.R,forArr(this.node,(function(t){r?t.template=r.replace(/[\r\n]+\s+/g,"").replace(/<img_render/g,"<img"):t.template||(t.template=t.innerHTML.replace(/[\r\n]+\s+/g,"").replace(/<img_render/g,"<img")),t.innerHTML=_.Y()(t.template,n),t.className=t.className.replace("QUI","QUIEND")})),this.randeCallback.call(this),this},updateRender:function(n,t,r){this.render(objComb(this.randeDate,n,!0),t,r)},appendRender:function(n,t){var r=this.node[0];return new _.W("<div>").html(_.Y()(r.template,n)).childs().forEach((function(n){r.appendChild(n)})),t||this.randeCallback.call(this),this},cleanRender:function(){forArr(this.node,(function(n){n.className=n.className.replace("QUIEND","QUI")}))},stopRender:function(){forArr(this.node,(function(n){n.className=n.className.replace("QUI","QUISTOP")}))}},_.Y=function(){var n=/{{(.+?)}}/g,t=/<!--for (\w+)-->(.+?)<!--endfor \1-->/g,r=/<!--if (.+?)-->(.+?)<!--endif \1-->/g,e=/(\(["']?)([\w.]+)(["']?\))/g;function i(n,t){if((t=t.trim()).indexOf(".")>0){t=t.split(".");for(var r=0;r<t.length&&(!isUn(n)&&!isNull(n));r++)n=n[t[r]]}else n=n[t];return n}function o(t,r){return getType(r)===_.t.S?t.replace(n,(function(n,t){return n=t.split("||"),t=n[0].trim(),t=e.test(t)?new Function("return "+t.replace(e,(function(n,t,e,o){return t+i(r,e)+o})))():i(r,t),0!==(o=t)&&""!==o&&empty(o)?new Function("return "+n[1])()||"":t;var o})):""}return function n(e,i){var u=getType(i);return u===_.t.u||u===_.t.S?mapArr(u===_.t.u?i:[i],(function(i){return o(function(n,t){return getType(t)===_.t.S?n.replace(r,(function(n,r,e){var i;return 0===r.indexOf("!")?isUn(i=(r=r.substr(1).split("=="))[1]?t[r[0]]==r[1]:t[r[0]])?n:empty(i)?e:"":isUn(i=(r=r.split("=="))[1]?t[r[0]]==r[1]:t[r[0]])?n:empty(i)?"":e})):""}(e,i).replace(t,(function(t,r,e){return n(e,i[r])})),i)})).join(""):""}};var k=function(n,t){if(getType(n)!==_.t.m)return new _.W(n,t);_.B?document.onreadystatechange=function(){"complete"===document.readyState&&(document.onreadystatechange=null,n(t))}:document.addEventListener("DOMContentLoaded",(function(){n(t)}))},obj,guid;function API(n){this.url=parseUrl(n),-1===location.hostname.indexOf(_.t.i)&&(this.url.hostname="api."+_.t.i),(window.ActiveXObject||"ActiveXObject"in window)&&this.url.searchParams.set("r",(new Date).getTime()),this.param={url:this.url.href,type:_.t.j},this.url.hostname!==location.hostname?this.type="jsonp":this.url.pathname.match(/^\/((ck)|(inc)).*\/.+/)?this.type="xhr":(this.url.hostname="api."+_.t.i,this.type="jsonp")}k.author=config.author,k.version=config.version,k.objMerge=objMerge,k.objCombine=objComb,k.forEach=function(n,t){switch(getType(n)){case _.t.O:case _.t.u:forArr(n,t);break;case _.t.S:forObj(n,t);break;case _.t.s:forArr(n.split(""),t);break;default:return n}},k.map=function(n,t){switch(getType(n)){case _.t.u:return mapArr(n,t);case _.t.S:return mapObj(n,t);case _.t.s:return mapArr(n.split(""),t);default:return[]}},k.url=parseUrl,k.getUrl=(obj=parseUrl(location.href).searchParams,function(n){return obj.get(n)||""}),k.getType=getType,k.empty=empty,k.platform="web",k.apiPublicParam={appKey:2406394919},API.prototype={get:function(n){return n=k.objCombine(n||{},k.apiPublicParam),this.url.searchParams.concat(n),this.param.url=this.url.href,this},delete:function(n){return this.param.method="delete",n=k.objCombine(n||{},k.apiPublicParam),this.url.searchParams.concat(n),this.param.url=this.url.href,this},post:function(n){return this.param.method=_.t.C,this.param.data=k.objCombine(n||{},k.apiPublicParam),this},put:function(n){return this.param.method="put",this.param.data=k.objCombine(n||{},k.apiPublicParam),this},send:function(n,t){var r=this,e=function(e){0===e.status.code?n&&n(e.data||[],e):t?t({status:e.status,type:"data",code:e.status.code,msg:e.status.msg.replace(/^\w[\w ]+:\s?/,"")}):console.error("api error: "+e.status.msg+";\ncode: "+e.status.code+";\nurl: "+r.url.href+";\nmethod: "+r.param.method)};"xhr"===this.type?xhr(objComb({success:e,failed:function(n){t({code:n,type:"fail",msg:"网络请求失败"})},error:function(){t({code:5e3,type:"error",msg:"网络请求错误"})}},this.param)):k.jsonp(this.url.href,e)}},k.api=function(n){return new API(n)},k.request=xhr,k.get=function(n,t,r,e){var i={url:n,type:e||_.t.j};return getType(t)===_.t.m?(i.success=t,i.type=r||i.type):(i.data=t,i.success=r),xhr(i)},k.post=function(n,t,r,e){var i={url:n,method:_.t.C,type:e||_.t.j};return getType(t)===_.t.m?(i.success=t,i.type=e):(i.data=t,i.success=r),xhr(i)},k.jsonp=function(n,t,r,e){if(getType(t)===_.t.m&&(r=t,t={}),n=parseUrl(n,t),isUn(t.callback)){for(var i="Q_jsonp_",o=n.href,u=1,c=0;c<o.length;c++)u+=o[c].charCodeAt(0)*(c+1);i+=u,void 0!==e&&(i+=e),n.searchParams.set("callback",i)}return window[t.callback||i]=r||_.R,_.q.appendChild(_.F(n.href)),{abort:function(){window[t.callback]=_.R}}},k.fullscreen=function(n,t,r){if((n=k(n).item(0)||document.documentElement).requestFullscreen)n.requestFullscreen();else if(n.mozRequestFullScreen)n.mozRequestFullScreen();else if(n.msRequestFullscreen)n.msRequestFullscreen();else{if(!n.webkitRequestFullscreen)return;n.webkitRequestFullScreen()}n.isFull=!0,window.onresize=function(){n.isFull?(n.isFull=!1,n.style.overflow="auto",t&&t(n)):(n.isFull=!0,n.style.removeProperty("overflow"),r&&r(n))}},k.scrollTo=function(n,t){var r=0,e=Math.max(document.documentElement.scrollTop,document.body.scrollTop);getType(n)===_.t.A?r=n.offsetTop:getType(n)===_.t.U&&(r=n);var i=0,o=(r+=t||0)-e,u=function(){i<10&&(i++,window.scrollTo(0,e+o*Math.pow(i/10,2.2)),setTimeout(u,10))};u()},k.formatNumber=function(n,t){return n=Number(n)||0,t?n.toLocaleString():n<1e4?n:n<1e8?(n/1e4).toFixed(1)+"万":(n/1e8).toFixed(1)+"亿"},k.formatNumberToObj=function(n){var t,r;return n<1e4?(t=n,r=""):n<1e8?(t=(n/1e4).toFixed(1),r="万"):(t=(n/1e8).toFixed(1),r="亿"),{count:t,rule:r}},k.chineseNumber=function(n,t){var r=["〇","一","二","三","四","五","六","七","八","九"];if(t)return mapArr(String(n).split(""),(function(n){return r[n]})).join("");var e=["","十","百","千"],i=["","万","亿","兆"];return mapArr(String(n).split("").reverse(),(function(n,t){return"0"===n?r[0]:r[n]+e[t%4]+(i[t/4]||"")})).reverse().join("").replace(new RegExp(r[0]+"+","g"),r[0]).replace(new RegExp(r[0]+"+$"),"").replace(/^一十/,"十")},k.json={parse:parseJson,stringify:stringJson},k.save=function(n,t,r){return storage(n,t,r)},k.cache=function(n,t){return storage(n,t,1)},k.cookie=function(n,t,r,e,i){var o=document.cookie.match(new RegExp(n+"=.*?(?=;|$)"));if(o=o?_.X(o[0].split("=")[1]):"",isUn(t))return o;if(isNull(t))return document.cookie=n+"=null; expires="+new Date(-1).toUTCString(),o;if(o=n+"="+_.L(t),isUn(i)||(o+="; domain="+i),isUn(e)||(o+="; path="+e),!isUn(r)){var u;if("string"===getType(r))r.match(/^\d+ ((hour)|(day)|(year))$/)?(u=r.split(" "),r=Number(u[0])*{hour:3600,day:86400,year:31536e3}[u[1]]):r=(u=new Date(r)).getTime()?u:null;"number"===getType(r)&&(r=13===String(r).length?new Date(r):new Date((new Date).getTime()+1e3*r)),"date"===getType(r)&&r.getTime()&&(o+="; expires="+r.toUTCString())}return document.cookie=o,t},k.copy=function(n){var t=k("<input>").style({position:"absolute",top:0,opacity:0}).appendTo(document.body),r=t.item();r.value=n,r.select(),r.setSelectionRange(0,r.value.length),document.execCommand("Copy"),t.remove()},k.log=function(n){var t=k.log.y||0,r=k("<div>").html(n).style({background:"rgba(0,0,0,.7)",color:"white",position:"fixed",padding:"3px",font:"12px/1.2",overflow:"auto",top:t+"px",left:1,"max-width":"100%","min-width":"200px","z-index":"23330348"}).appendTo(document.body);k.log.y=t+r.item(0).clientHeight+1},k.animation=function(n,t){t=t||{};var r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(n){return setTimeout(n,1e3/60)},e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||clearTimeout,i=t.$frameOut||null,o=0,u=60*(t.$interval||0),c=0;return{stop:function(){e(t.$animId)},start:function s(){t.$animId=r(s),c<u?c++:(c=0,o++,t.$frame=o,(!0===n(t)||i&&i<=o)&&(e(t.$animId),t.$animId=0))},get status(){return!!t.$animId},param:t,get frame(){return t.$frame},get frameId(){return t.$animId}}},k.onPageHidden=function(n){var t=function(){n.isEnd||(n.isEnd=!0,n())},r=function(){(document.hidden||document.webkitHidden)&&(document.removeEventListener("visibilitychange",r,!1),document.removeEventListener("webkitvisibilitychange",r,!1),t())},e=function(){window.removeEventListener("pagehide",e,!0),t()};document.addEventListener("visibilitychange",r,!1),document.addEventListener("webkitvisibilitychange",r,!1),window.addEventListener("pagehide",e,!0)},k.require=function(name,alias){k[name]=function(){console.error(name+"模块未成功加载")};var url=name;return-1===name.indexOf("/")?url=_.t.J+"/mod/"+name+".js":(name=url.match(/([^/]+)\.(js|jsrc|es6|mjs|jsx)\b/i),name=name?name[1]:"lastFunction"),alias&&(name=alias),xhr({url:url+"?"+_.t.M,type:"text",async:!1,success:function(data){data=data.replace(/\/\*\*[^\x05]*\*\/\n/,"");var fn=eval(data);fn||(fn=new Function("return "+data)()||new Function),k[name]=function(){return fn.apply(k,arguments)}},failed:function(n){console.error(name+" require error,"+n)}}),k[name]},k.loadJs=loadJs,k.loadCss=loadCss,k.path=_.t.J,k.v=_.t.M,k.domain=_.t.i,k.setCss=function(n){var t=_.$("style");t.type="text/css",_.q.appendChild(t),t.appendChild(document.createTextNode("")),forObj(n,(function(n,r){t.sheet.insertRule(r+"{"+n+"}",0)}))},k.isMail=function(n){return/^[\w\u4e00-\u9fa5]+((\.[\w\u4e00-\u9fa5]+)*)@([a-z0-9]+(-?[a-z0-9]+)*\.)+([a-z]{2,4})$/i.test(n)},k.isMobile=function(n){return/^1\d{10}$/.test(n)},k.getTextCount=function(n){return n.replace(/[\s\u3000]+/g,"").length},k.getByteLength=function(n){return n.replace(/[\u4e00-\u9fa5\u3002\uff1b\uff0c\uff1a\u201c\u201d\uff08\uff09\u3001\uff1f\u300a\u300b]/g,"**").length},k.substr=function(n,t,r){return(n=String(n)).length>t?n.substr(0,t-1)+(r||"..."):n},k.trim=function(n,t,r){var e="";return isUn(t)?e=new RegExp("(^[\\s\\u3000])|([\\s\\u3000]$)","g"):(isUn(r)&&(r=t),e=new RegExp("(^\\"+t+")|(\\"+r+"$)","g")),n.replace(e,"")},k.getaddr=function(n,t){if("::1"!==n&&0!==n.indexOf("10.")&&0!==n.indexOf("192.168.")){var r="Q_ip"+n.replace(/\./g,"")+(new Date).getTime();_.P[r]=function(n){"A00000"===(n=parseJson(n)).code?t(n.address):t(null)},k.loadJs("//sip.1kmb.cn/getaddr?ip="+n+"&cb="+r)}else t({region:"*",region_id:"*",city:"内部网络",city_id:"*",ip:n})},k.isLogin=function(){return!(!k.cookie("accessToken")&&!k.cookie("c_u"))},k.loginInfo=function(){var n=k.cookie("c_u").split("&"),t={id:n[1],nickname:function(n){var t=[];n=n.split("l");for(var r=0;r<n.length;r++)n[r]>0&&t.push(String.fromCharCode(Number(n[r])));return t.join("")}(n[0])},r=k.cookie("accessToken");return r&&forArr(r.split("&"),(function(n){2===(n=n.split("=")).length&&(t[n[0]]=_.X(n[1]))})),t},k.getUserInfo=function(n,t){t=t||_.R;var r=null,e={};return getType(n)===_.t.m?(t=n,n=k.loginInfo().id):isObj(n)&&(getType((n=(e=n).id).success)===_.t.m&&(t=n.success),getType(n.failed)===_.t.m&&(r=n.failed)),!!n&&(k.api("/ck/user/"+n).get(e).send((function(n){t.call(k,n)}),(function(n){r?r(n):console.error("获取用户信息失败: "+n.msg)})),!0)},k.getUserAvatarUrl=function(n,t){if(Number(n)){var r=String(n).substr(-2),e=String(n).substr(-4,2);return"//cdn.static.17k.com/user/avatar/"+("0"+r%20).substr(-2)+"/"+r+"/"+e+"/"+n+".jpg-"+(t||"88x88")+"?v=0"}return"//cdn.static.17k.com/pic/default_user_avatar.jpg"},k.getBookCoverUrl=function(n,t){return Number(n)?"//cdn.static.17k.com/book/189x272/"+String(n).substr(-2)+"/"+String(n).substr(-4,2)+"/"+n+".jpg-"+(t||"189x272")+"?v=0":"//cdn.static.17k.com/pic/default_cover.png"},k.genPages=function(n,t,r){var e=1===n?[]:["-1"],i=n-(r=r||2);i<=1?i=1:e.push("1"),i>2&&e.push("");for(var o=[],u=1;u<=t;u++)o.push(String(u));var c=i+2*r;return e=e.concat(o.slice(i-1,c)),c+2<t&&e.push(""),c+1<t&&e.push(String(t)),n<t&&e.push("+1"),e},k.logout=function(n){k.cookie("c_u","",-1,"/",_.t.i),k.cookie("accessToken","",-1,"/",_.t.i),getType(n)===_.t.s?top.location.href=n:getType(n)===_.t.m?n():top.location.reload()},k.login=function(n){var t=k.browser();k.isLogin()?n(k.loginInfo()):t.app?k.appOpenTarget("login"):t.mobile?location.href="//h5.17k.com/passport/":location.href="17k.com"===_.t.i?"//passport.17k.com/":"//www."+_.t.i+"/passport"},k.isBindMobile=function(n,t){k.api("/ck/user/myH5Info/"+n).get().send((function(n){n.bindInfo.mobile?t():k.alert({text:"温馨提示: 根据相关网络安全条例，发布评论需绑定你的手机号",type:"failed",confirmText:"前往绑定",confirm:function(){location.href="//user."+_.t.i+("h5"===k.platform?"/h5/myUserInfo/binding.html":"/www/userinfo/snsbinds.html")+"?method=bindMobile&formUrl="+encodeURIComponent(location.href)},cancelText:"不了,谢谢",cancel:function(){}})}))},k.loginCallbacks=[],k.createGuid=function(n){return(n=n||"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx").replace(/x/g,(function(){return(16*Math.random()|0).toString(16)})).replace("y",(function(){return(3&(16*Math.random()|0)|8).toString(16)}))},k.uuid=(guid=k.cookie("GUID"),guid||(guid=k.createGuid(),k.cookie("GUID",guid,31536e3,"/",_.t.i)),guid),k.isCPS=function(n){var t=parseUrl(location.href).searchParams,r=k.cookie("c_csc"),e=k.cookie("c_channel");return"url"===n&&(r=t.get("hmsr"),e=t.get("c_channel")),"referer"===n?1===storage("isCPS"):!(!r||!e||0!==e.indexOf("CPS-")||0!==r.indexOf(e))&&(!n||0!==n.indexOf("CPS-")||(e===n||!k.isLogin()&&t.get("c_channel")===n))},k.browser=function(n){var t=navigator.userAgent,r={webkit:t.indexOf("AppleWebKit")>-1,opera:t.indexOf("Presto")>-1,ie:t.indexOf("Trident")>-1,firefox:t.indexOf("Gecko")>-1&&-1===t.indexOf("KHTML"),chrome:!!t.match(/((Chrome)|(CriOS))\/([\d.]+)(?!.+((UC)|(QQ))Browser)/),app:!!t.match(/ chineseallread:([\d.]+)/)||!!parseUrl().searchParams.get("_versions")||["2","3"].indexOf(k.cookie("platform"))>-1||!!(window.chineseallread||window.webkit&&window.webkit.messageHandlers.openTarget),oppo:!!window.OppoWebPage,vivo:t.indexOf("VivoBrowser")>0,android:t.indexOf("Android")>-1||t.indexOf("Linux")>-1,ios:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),iphone:t.indexOf("iPhone")>-1,iphonex:t.indexOf("iPhone")>-1&&window.screen.height>=812,ipad:t.indexOf("iPad")>-1,wx:t.indexOf("MicroMessenger")>-1,mqq:!!t.match(/QQBrowser\/([\d.]+)/),uc:!!t.match(/UCBrowser\/([\d.]+)/),huawei:!!t.match(/huawei/i),mobile:/(iPhone|iPad|iPod|iOS|Android)/i.test(t),ua:t};return r.pc=!r.mobile,r.weixin=r.wx,r.qq=r.mqq,n?r[n]:r},k.app=function(n,t,r){return getType(n)===_.t.S&&(n=window.chineseallread?n.android:n.ios),window.chineseallread&&window.chineseallread[n]?window.chineseallread[n](t):window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers[n]?window.webkit.messageHandlers[n].postMessage(t):r?void(location.href=r):null},k.appOpenTarget=function(n,t){k.browser("app")?(n="kpath://"+n,window.chineseallread?window.chineseallread.openTarget(n):window.webkit.messageHandlers.openTarget.postMessage(n)):location.href=t},k.md5=function(n){return k.require("md5")(n)},k.pop=function(n){const t=k("<div>").style({position:"fixed",left:"0",right:"0",top:"49%","text-align":"center"}).append(k("<div>").style({display:"inline-block",background:"black",padding:"5px 10px","line-height":"1","border-radius":"4px",color:"white"}).html(n)).appendTo(document.body);setTimeout((function(){t.remove()}),2e3)},k.alert=function(n){return k.require("alert")(n)},k.toast=function(n){return k.require("toast")(n)},k.layout=function(n){return k.require("layout")(n)},k.popup=function(n){return k.loadCss(this.path+"/css/popup.css?"+_.t.M),k.require("popup")(n)},k.date=function(n){return k.require("date")(n)},k.comment=function(n){return k.require("comment")(n)},k.help=function(){return k.require("help")()},k.tabs=function(n,t,r){return k.require("tabs")(n,t,r)},k.pay=function(n){return k.require("pay")(n)},k.book=function(n){return k.require("book")(n)},k.imgCode=function(n,t,r,e){return k.require("imgCode")(n,t,r,e)},k.newUser=function(n,t){k.api("/ck/user/register/auto").post({autoVersion:2001}).send(n,t||console.error)},k.parseContent=function(n,t){if("array"===getType(n)){const r=n.map((function(n){if("simple"===n.textType){const r=n.text.replace(/^[\s|\u3000]*/gm,"");return"array"===t?r:"<p>"+n.text.replace(/^[\s|\u3000]*/gm,"").replace(/[\r\n]/g,"</p><p>")+"</p>"}}));return"array"===t?r:r.join("")||'评论内容不支持在网页打开，可前往客户端查看<a href="/download/" target="_blank">【点击下载】</a>'}return"array"===t?[]:""},k.loadAd=function(n,t,r){k.get(n,(function(n){if((n=n?new Function("return "+n)():{}).issue){var e=new Date(n.start_time.replace(/-/g,"/")).getTime()||0,i=new Date(n.end_time.replace(/-/g,"/")).getTime()||1/0,o=(new Date).getTime();if(o>=e&&o<i){if(n.list.length){var u=n.list[Math.floor(Math.random()*n.list.length)];n.link=u.link,n.img=u.img}n.img.match(/.+\.(jpg|jpeg|gif|png)/i)&&t(n)}}else r&&r(n)}),"text")},k.loadAt=function(n,t,r){k.get(n,(function(n){if((n=n?new Function("return "+n)():{}).issue){var e=new Date(n.start_time.replace(/-/g,"/")).getTime()||0,i=new Date(n.end_time.replace(/-/g,"/")).getTime()||1/0,o=(new Date).getTime();o>=e&&o<i&&t&&t(n)}else r&&r(n)}),"text")},k.fireworks=function(n){return k.require("fireworks")(n)},k.scrollTopRefresh=function(n){var t=document.documentElement,r=document.body,e=1.3*Math.max(t.clientHeight,r.clientHeight);window.addEventListener("scroll",(function(){!0!==n.Z&&e+Math.max(t.scrollTop,r.scrollTop)>=Math.max(t.scrollHeight,r.scrollHeight)&&(n(),n.Z=!0,setTimeout((function(){n.Z=!1}),1e3))}))},_.P[config.namespace]=_.P.QD=k}({author:"ZhangYongfeng",version:"2.5.20191205",namespace:"k"});
